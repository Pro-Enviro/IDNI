
<section>
  <div class="container relative" style="padding:15px">
    <div class="chat-container">
      <div class="flex justify-content-end p-2">
        <p-button icon="pi pi-times" [rounded]="true" [text]="true" size="large" styleClass="close-btn" routerLink="home"></p-button>
      </div>
      <div class="chatbox-nav">
        <img src="assets/img/idni-logo.svg" height="100px" class="ml-2">
        <h3 class="header-style text-4xl mr-5">IDNI Q&A</h3>
      </div>
      <div class="flex flex-row justify-content-center pt-3">
        <p class="text-gray-500 text-xl">{{currentDate | date:'EEEE dd.MM.yyyy'}}</p>
      </div>
      <div class="chat" #chat>
<!--        <pre>{{messages | json}}</pre>-->
        @for (message of messages; track $index){
        @if(message.userId == '0'){
            <div class="assistant-container">
              <div class="flex flex-row">
                <span class="span-style">{{message.name}}</span>
                <span class="span-style">{{message.company}}</span>
              </div>
              <div class="assistant-text-container flex flex-row">
                @if(message.name){
                <p-avatar [label]="message.name.substring(0,1)" class="pt-5 pr-2" size="normal" styleClass="assist-logo"></p-avatar>
                }
                <p>{{message.message}}</p>
              </div>
              <div class="flex flex-row">
                <span class="span-style">{{message.dateTime}}</span>
                <span class="span-style">{{message.status}}</span>
              </div>
            </div>
          } @else{
          <div class="user-container">
           <div class="flex flex-column">
             <div class="flex flex-row justify-content-end">
               <span class="span-style">{{message.name}}</span>
               <span class="span-style">{{message.company}}</span>
             </div>
             <div class="user-text-container flex flex-row">
               <p>{{message.message}}</p>
               @if(message.name){
               <p-avatar [label]="message.name.substring(0,1)" class="pt-5 pl-2" size="normal" styleClass="user-logo"></p-avatar>
               }
             </div>
             <div class="flex flex-row justify-content-end">
               <span class="span-style">{{message.dateTime}}</span>
               <span class="span-style">{{message.status}}</span>
             </div>
           </div>
          </div>
          }
        }
      </div>
      <div class="message-container">
        <div class="message-input">
          <input type="text" class="inputText" placeholder="User writes message" [(ngModel)]="text" #inputBox (keyup.enter)="onKey($event)"/>
        </div>
        <span class="message-icon pr-4">
          <p-button icon="pi pi-send" [rounded]="true" styleClass="chat-btn" (onClick)="sendMessage()"></p-button>
        </span>
      </div>
<!--      Assistant message container test-->
<!--      <div class="message-container">-->
<!--        <div class="message-input">-->
<!--          <input type="text" class="inputText" placeholder="Assistant writes message" [(ngModel)]="message" #inputBox (keyup.enter)="onEnter($event)"/>-->
<!--        </div>-->
<!--        <span class="message-icon pr-4">-->
<!--          <p-button icon="pi pi-send" [rounded]="true" styleClass="chat-btn" (onClick)="changeUser()"></p-button>-->
<!--        </span>-->
<!--      </div>-->
    </div>
  </div>
</section>

