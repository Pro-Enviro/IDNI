<div class="flex mt-5">
<!--  <div class="flex-1">-->
<!--    <p-panel header="Select Company">-->
<!--      <p-selectButton [options]="companies" [(ngModel)]="selectedCompany" optionLabel="name" optionValue="id" (ngModelChange)="onSelectCompany()" class="btn-select"></p-selectButton>-->
<!--    </p-panel>-->
<!--  </div>-->
<!--  <div class="flex-1" *ngIf="mpan.length">-->
<!--    <p-panel header="Select Mpan">-->
<!--      <p-selectButton [options]="mpan" [(ngModel)]="selectedMpan" (ngModelChange)="onSelectMpan($event)" class="btn-select"></p-selectButton>-->
<!--    </p-panel>-->
<!--  </div>-->
</div>
<p-card header="Authorised Supply Capacity (ASC)">
  <div class="grid p-3">
    <div class="lg:col-6 md:col-12">
      <p-card header="Company Supply" styleClass="card-select-panel">
        <p-table [value]="supplyList" dataKey="id" editMode="row">
          <ng-template pTemplate="header">
            <tr>
              <th>ID</th>
              <th>MPAN</th>
              <th>Start Date</th>
              <th>End Date</th>
              <th>ASC</th>
              <th>Save</th>
              <th>Delete</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-supply let-ri="rowIndex" let-editing="editing">
            <tr  [pEditableRow]="supply" #rowEdit>
              <td>
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input pInputText type="text" [(ngModel)]="supply.id" [readOnly]="true">
                  </ng-template>
                  <ng-template pTemplate="output">
                    {{ supply.id }}
                  </ng-template>
                </p-cellEditor>
              </td>

              <td>
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input pInputText type="text" [(ngModel)]="supply.mpan">
                  </ng-template>

                  <ng-template pTemplate="output">
                    {{supply.mpan}}
                  </ng-template>
                </p-cellEditor>
              </td>
              <td>
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <div style="'height: 300px'"></div>
                    <input type="date" pInputText [(ngModel)]="supply.start_date">
                  </ng-template>

                  <ng-template pTemplate="output">
                    {{supply.start_date.format('DD/MM/YYYY')}}
                  </ng-template>
                </p-cellEditor>
              </td>
              <td>
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input pInputText type="date" [(ngModel)]="supply.end_date">
                  </ng-template>

                  <ng-template pTemplate="output">
                    {{supply.end_date.format('DD/MM/YYYY')}}
                  </ng-template>
                </p-cellEditor>
              </td>
              <td>
                <p-cellEditor>
                  <ng-template pTemplate="input">
                    <input pInputText type="text" [(ngModel)]="supply.asc">
                  </ng-template>

                  <ng-template pTemplate="output">
                    {{supply.asc}}
                  </ng-template>
                </p-cellEditor>
              </td>
              <td>
                <div class="flex align-items-center justify-content-center gap-2">
                  <button *ngIf="!editing" pButton pRipple type="button" pInitEditableRow icon="pi pi-pencil" (click)="onSupplyEditInit(supply)" class="p-button-rounded p-button-text p-button-success"></button>
                  <button *ngIf="editing" pButton pRipple type="button" pSaveEditableRow icon="pi pi-check" (click)="editSupply(supply)" class="p-button-rounded p-button-text p-button-success mr-2"></button>
                  <button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow icon="pi pi-times" (click)="onSupplyEditCancel(supply, ri)" class="p-button-rounded p-button-text p-button-danger"></button>
                </div>
              </td>
              <td><button pButton (click)="removeSupply(supply.id)" icon="pi pi-trash" class="p-button-rounded p-button-text p-button-danger"></button></td>
            </tr>
          </ng-template>
        </p-table>
      </p-card>
    </div>
    <div class="lg:col-6 md:col-12">
      <p-card header="New Supply" styleClass="card-select-panel">
        <div class="p-3">
          <div class="flex p-2">
            <div class="flex flex-1">
              <label>MPAN Number</label>
            </div>
            <div class="flex flex-1">
              <input type="text" pInputText placeholder="Mpan" [(ngModel)]="mpan">
            </div>
          </div>

          <div class="flex p-2">
            <div class="flex flex-1">
              <label>Start Date</label>
            </div>
            <div class="flex flex-1">
              <input type="date" pInputText [(ngModel)]="startDate">
            </div>
          </div>

          <div class="flex p-2">
            <div class="flex flex-1">
              <label>End Date</label>
            </div>
            <div class="flex flex-1">
              <input type="date" pInputText [(ngModel)]="endDate">
            </div>
          </div>

          <div class="flex p-2">
            <div class="flex flex-1">
              <label>ASC</label>
            </div>
            <div class="flex flex-1">
              <input type="text" pInputText placeholder="ASC" [(ngModel)]="asc">
            </div>
          </div>

          <div class="flex p2">
            <div class="flex flex-1 pt-3">
              <button pButton class="btn-style" label="Save" icon="pi pi-save" (click)="addSupply()"></button>
            </div>
          </div>
        </div>
      </p-card>
    </div>
  </div>
</p-card>



